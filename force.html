<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A2Z Studio - Force Save Engine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
    <style>
        :root { --neon: #ff0055; --bg: #05000a; }
        body { font-family: 'Montserrat', sans-serif; background: var(--bg); color: white; display: flex; align-items: center; justify-content: center; min-h-screen; margin: 0; background: radial-gradient(circle at 50% 0%, #2a0015, var(--bg) 85%); }
        .force-card { background: rgba(255, 255, 255, 0.02); backdrop-filter: blur(30px); border: 1px solid rgba(255, 0, 85, 0.2); border-radius: 2.5rem; width: 100%; max-width: 500px; padding: 40px; }
        .progress-bg { width: 100%; height: 8px; background: #000; border-radius: 10px; overflow: hidden; margin-top: 20px; }
        .progress-fill { width: 0%; height: 100%; background: linear-gradient(90deg, #ff0055, #ff80ab); transition: 0.3s; box-shadow: 0 0 15px var(--neon); }
    </style>
</head>
<body class="min-h-screen">

    <div class="force-card space-y-8 animate-fade-in">
        <header class="text-center">
            <h1 class="text-2xl font-black italic uppercase tracking-tighter"><span class="text-pink-600">A2Z</span> FORCE SAVE</h1>
            <p class="text-[8px] font-bold text-white/30 uppercase tracking-widest mt-2">Bypassing Browser Player...</p>
        </header>

        <div class="space-y-4">
            <input type="text" id="target-link" placeholder="Paste your video link here..." class="w-full bg-white/5 border border-white/10 rounded-2xl p-4 text-xs outline-none focus:border-pink-600 transition">
            
            <button id="dl-btn" onclick="triggerForceDownload()" class="w-full py-5 rounded-2xl bg-pink-600 font-black text-xs uppercase tracking-widest shadow-[0_10px_30px_rgba(255,0,85,0.3)] active:scale-95 transition">
                Force Download Now
            </button>
        </div>

        <div id="dl-console" class="hidden bg-black/40 p-6 rounded-2xl border border-white/5 space-y-4">
            <div class="flex justify-between items-end">
                <p id="status-txt" class="text-[9px] font-black text-pink-500 uppercase">Locking Binary...</p>
                <span id="percent-txt" class="text-2xl font-black italic">0%</span>
            </div>
            <div class="progress-bg"><div id="progress-fill" class="progress-fill"></div></div>
            <p id="size-txt" class="text-[8px] text-white/20 uppercase font-bold">0.00 MB / Calculating...</p>
        </div>
    </div>

    <script>
        async function triggerForceDownload() {
            const url = document.getElementById('target-link').value;
            if(!url.startsWith('http')) return alert("Bhai, pehle link toh sahi daalo!");

            const btn = document.getElementById('dl-btn');
            const consoleBox = document.getElementById('dl-console');
            const fill = document.getElementById('progress-fill');
            const percent = document.getElementById('percent-txt');
            const status = document.getElementById('status-txt');
            const sizeTxt = document.getElementById('size-txt');

            btn.disabled = true;
            btn.innerText = "CAPTURING...";
            consoleBox.classList.remove('hidden');

            // --- THE NEURAL BYPASS LOGIC ---
            // Hum CORS Proxy ka use karenge taaki browser block na kare
            const proxy = "https://corsproxy.io/?"; 
            
            try {
                const xhr = new XMLHttpRequest();
                xhr.open('GET', proxy + encodeURIComponent(url), true);
                xhr.responseType = 'blob';

                xhr.onprogress = (e) => {
                    if (e.lengthComputable) {
                        const p = Math.floor((e.loaded / e.total) * 100);
                        fill.style.width = p + "%";
                        percent.innerText = p + "%";
                        sizeTxt.innerText = `${(e.loaded/1048576).toFixed(2)} MB / ${(e.total/1048576).toFixed(2)} MB`;
                    }
                };

                xhr.onload = function() {
                    if (xhr.status === 200) {
                        const blob = xhr.response;
                        
                        // Validation: 100KB se kam ki file corruption hai
                        if (blob.size < 100000) {
                            alert("Bhai, ye link corrupt hai ya expire ho gaya hai!");
                            location.reload();
                            return;
                        }

                        const bUrl = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = bUrl;
                        a.download = `A2Z_DOWNLOADED_VIDEO_${Date.now()}.mp4`; // Forces Save As dialog
                        document.body.appendChild(a);
                        a.click();
                        
                        setTimeout(() => {
                            URL.revokeObjectURL(bUrl);
                            document.body.removeChild(a);
                            btn.innerText = "SUCCESS!";
                            status.innerText = "Download Finished!";
                        }, 2000);
                    } else {
                        throw new Error();
                    }
                };

                xhr.onerror = () => { throw new Error(); };
                xhr.send();

            } catch (e) {
                alert("Neural Node Blocked! Link expire ho sakta hai.");
                btn.disabled = false;
                btn.innerText = "FORCE DOWNLOAD NOW";
            }
        }
    </script>
</body>
</html>