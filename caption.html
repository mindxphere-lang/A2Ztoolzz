<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Insta Pro - Unlimited</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
    <style>
        body { background: #05000a; color: white; font-family: 'Montserrat', sans-serif; }
        .glass { background: rgba(255, 0, 85, 0.03); backdrop-filter: blur(20px); border: 1px solid rgba(255, 0, 85, 0.15); border-radius: 2rem; }
    </style>
</head>
<body class="p-6 min-h-screen">
    <nav class="mb-10"><a href="index.html" class="text-pink-500 font-black text-[10px] uppercase"><i class="fa-solid fa-arrow-left mr-2"></i> Back to Hub</a></nav>
    <div class="max-w-xl mx-auto space-y-8">
        <header class="text-center"><h1 class="text-4xl font-black italic uppercase">Insta <span class="text-pink-600">Pro</span></h1><p class="text-[9px] text-white/30 uppercase tracking-[0.4em] mt-2">Unlimited Neural Node</p></header>
        <div class="glass p-8 space-y-6 text-center">
            <textarea id="ai-in" rows="4" placeholder="Kiske baare me caption chahiye?" class="w-full bg-white/5 p-5 rounded-2xl outline-none border border-white/10 text-sm"></textarea>
            <button id="gen-btn" onclick="generate()" class="w-full py-5 rounded-2xl bg-pink-600 font-black text-xs uppercase tracking-widest shadow-lg shadow-pink-500/20">Generate With Rotation</button>
        </div>
        <div id="res-box" class="hidden glass p-8 animate-fade-in">
            <h3 class="text-[10px] font-black uppercase text-pink-500 mb-4">AI Result</h3>
            <div id="ai-out" class="text-sm leading-relaxed text-white/80 whitespace-pre-line"></div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script>
        firebase.initializeApp({ apiKey: "AIzaSyDI7v-5DoTUWZBhajcpZk6ed9rH2GcAqLw", databaseURL: "https://a2ztools-6ea22-default-rtdb.asia-southeast1.firebasedatabase.app" });
        const db = firebase.database();
        let keyNode = [];
        // Admin panel me 'groqKey' ke andar 5-6 keys daalein
        db.ref('keys/groqKey').on('value', s => { keyNode = s.val() || []; });

        async function generate() {
            const input = document.getElementById('ai-in').value; if(!input) return alert("Likho kuch!");
            const btn = document.getElementById('gen-btn');
            
            // Key Rotation Logic
            if(keyNode.length === 0) return alert("Master Control me groqKey nodes nahi hain!");
            const randomKey = Array.isArray(keyNode) ? keyNode[Math.floor(Math.random() * keyNode.length)] : keyNode;

            btn.disabled = true; btn.innerText = "ROTATING KEY & THINKING...";
            try {
                const res = await fetch("https://api.groq.com/openai/v1/chat/completions", {
                    method: "POST",
                    headers: { "Authorization": `Bearer ${randomKey}`, "Content-Type": "application/json" },
                    body: JSON.stringify({ model: "llama3-8b-8192", messages: [{ role: "user", content: `3 viral Instagram captions for: ${input}` }] })
                });
                const data = await res.json();
                document.getElementById('ai-out').innerText = data.choices[0].message.content;
                document.getElementById('res-box').classList.remove('hidden');
            } catch (e) { alert("Node Error! Key maybe dead. Trying again..."); }
            finally { btn.disabled = false; btn.innerText = "GENERATE AGAIN"; }
        }
    </script>
</body>
</html>
